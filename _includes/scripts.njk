<script type="text/javascript" src="/assets/js/lozad.js"></script>
<script type="text/javascript">
  (() => {
    // Lazy-load images and videos
    const observer = lozad(".lazy", {threshold: 0.1});
    observer.observe();

    // Make pictures clickable (for mobile I guess)
    document
      .querySelectorAll("picture")
      .forEach((p) => {
        p.addEventListener("click", (e) => (window.location.href = e.target.parentNode.dataset.path));
      });

    document.addEventListener("DOMContentLoaded", function () {
      // Set the title appropriately.
      if ([
        "log.nikhil.io",
        "log.nikhil.lol",
        "log.nikhil.fish",
      ].includes(window.location.hostname)) {
        document.querySelector("h1 a").innerText = window.location.hostname;
      }

      // Set DARK MODE 🧛‍♂️
      const darkModeSwitch = document.querySelector("#dark-mode");
      darkModeSwitch.checked = localStorage.getItem("darkMode") === "true";

      darkModeSwitch.addEventListener(
        "change", () => darkModeSwitch.checked
        ? localStorage.setItem("darkMode", true)
        : localStorage.removeItem("darkMode"),);
    });
  })();
</script>

<script async="async" src="https://www.googletagmanager.com/gtag/js?id={{ site.googleAnalyticsId }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "{{ site.googleAnalyticsId }}");
</script>